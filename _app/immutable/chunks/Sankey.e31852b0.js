import{S as Ge,i as qe,s as He,J as z,a as le,e as ue,K as P,m as I,h as A,c as ae,n as p,p as X,b as q,D as H,T as fe,H as he,P as j,Q as Ee,q as Ve,r as Oe,u as Je,U as ce}from"./index.7a1075dc.js";import{R as Te,r as Ke,d as Qe,e as Ue,C as Xe,b as de,f as ge,g as Y,h as Fe,l as Ye,j as Ae,k as Ze,m as $e,o as et,w as tt,a as ye}from"./path.cfaee979.js";const nt=Math.PI/180,ot=180/Math.PI;var Be=-.14861,oe=1.78277,ie=-.29227,$=-.90649,Q=1.97294,me=Q*$,pe=Q*oe,_e=oe*ie-$*Be;function it(n){if(n instanceof W)return new W(n.h,n.s,n.l,n.opacity);n instanceof Te||(n=Ke(n));var e=n.r/255,t=n.g/255,o=n.b/255,r=(_e*o+me*e-pe*t)/(_e+me-pe),d=o-r,u=(Q*(t-r)-ie*d)/$,L=Math.sqrt(u*u+d*d)/(Q*r*(1-r)),g=L?Math.atan2(u,d)*ot-120:NaN;return new W(g<0?g+360:g,L,r,n.opacity)}function D(n,e,t,o){return arguments.length===1?it(n):new W(n,e,t,o??1)}function W(n,e,t,o){this.h=+n,this.s=+e,this.l=+t,this.opacity=+o}Qe(W,D,Ue(Xe,{brighter(n){return n=n==null?de:Math.pow(de,n),new W(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?ge:Math.pow(ge,n),new W(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=isNaN(this.h)?0:(this.h+120)*nt,e=+this.l,t=isNaN(this.s)?0:this.s*e*(1-e),o=Math.cos(n),r=Math.sin(n);return new Te(255*(e+t*(Be*o+oe*r)),255*(e+t*(ie*o+$*r)),255*(e+t*(Q*o)),this.opacity)}}));function Ce(n){return function e(t){t=+t;function o(r,d){var u=n((r=D(r)).h,(d=D(d)).h),L=Y(r.s,d.s),g=Y(r.l,d.l),s=Y(r.opacity,d.opacity);return function(k){return r.h=u(k),r.s=L(k),r.l=g(Math.pow(k,t)),r.opacity=s(k),r+""}}return o.gamma=e,o}(1)}Ce(Fe);var ze=Ce(Y);function rt(){var n=0,e=1,t,o,r,d,u=Ae,L=!1,g;function s(y){return y==null||isNaN(y=+y)?g:u(r===0?.5:(y=(d(y)-t)*r,L?Math.max(0,Math.min(1,y)):y))}s.domain=function(y){return arguments.length?([n,e]=y,t=d(n=+n),o=d(e=+e),r=t===o?0:1/(o-t),s):[n,e]},s.clamp=function(y){return arguments.length?(L=!!y,s):L},s.interpolator=function(y){return arguments.length?(u=y,s):u};function k(y){return function(b){var S,_;return arguments.length?([S,_]=b,u=y(S,_),s):[u(0),u(1)]}}return s.range=k($e),s.rangeRound=k(et),s.unknown=function(y){return arguments.length?(g=y,s):g},function(y){return d=y,t=y(n),o=y(e),r=t===o?0:1/(o-t),s}}function st(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function Pe(){var n=Ye(rt()(Ae));return n.copy=function(){return st(n,Pe())},Ze.apply(n,arguments)}ze(D(-100,.75,.35),D(80,1.5,.8));var lt=ze(D(260,.75,.35),D(80,1.5,.8));D();var ut=Array.prototype.slice;function at(n){return n[0]}function ft(n){return n[1]}class ht{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t);break}}this._x0=e,this._y0=t}}function ct(n){return new ht(n,!0)}function dt(n){return n.source}function gt(n){return n.target}function yt(n){let e=dt,t=gt,o=at,r=ft,d=null,u=null,L=tt(g);function g(){let s;const k=ut.call(arguments),y=e.apply(this,k),b=t.apply(this,k);if(d==null&&(u=n(s=L())),u.lineStart(),k[0]=y,u.point(+o.apply(this,k),+r.apply(this,k)),k[0]=b,u.point(+o.apply(this,k),+r.apply(this,k)),u.lineEnd(),s)return u=null,s+""||null}return g.source=function(s){return arguments.length?(e=s,g):e},g.target=function(s){return arguments.length?(t=s,g):t},g.x=function(s){return arguments.length?(o=typeof s=="function"?s:ye(+s),g):o},g.y=function(s){return arguments.length?(r=typeof s=="function"?s:ye(+s),g):r},g.context=function(s){return arguments.length?(s==null?d=u=null:u=n(d=s),g):d},g}function mt(){return yt(ct)}function ke(n,e){let t;if(e===void 0)for(const o of n)o!=null&&(t<o||t===void 0&&o>=o)&&(t=o);else{let o=-1;for(let r of n)(r=e(r,++o,n))!=null&&(t<r||t===void 0&&r>=r)&&(t=r)}return t}function Ie(n,e){let t;if(e===void 0)for(const o of n)o!=null&&(t>o||t===void 0&&o>=o)&&(t=o);else{let o=-1;for(let r of n)(r=e(r,++o,n))!=null&&(t>r||t===void 0&&r>=r)&&(t=r)}return t}function te(n,e){let t=0;if(e===void 0)for(let o of n)(o=+o)&&(t+=o);else{let o=-1;for(let r of n)(r=+e(r,++o,n))&&(t+=r)}return t}function pt(n){return n.target.depth}function _t(n){return n.depth}function kt(n,e){return e-1-n.height}function je(n,e){return n.sourceLinks.length?n.depth:e-1}function wt(n){return n.targetLinks.length?n.depth:n.sourceLinks.length?Ie(n.sourceLinks,pt)-1:0}function F(n){return function(){return n}}function we(n,e){return Z(n.source,e.source)||n.index-e.index}function ve(n,e){return Z(n.target,e.target)||n.index-e.index}function Z(n,e){return n.y0-e.y0}function ne(n){return n.value}function vt(n){return n.index}function Lt(n){return n.nodes}function bt(n){return n.links}function Le(n,e){const t=n.get(e);if(!t)throw new Error("missing: "+e);return t}function be({nodes:n}){for(const e of n){let t=e.y0,o=t;for(const r of e.sourceLinks)r.y0=t+r.width/2,t+=r.width;for(const r of e.targetLinks)r.y1=o+r.width/2,o+=r.width}}function St(){let n=0,e=0,t=1,o=1,r=24,d=8,u,L=vt,g=je,s,k,y=Lt,b=bt,S=6;function _(){const i={nodes:y.apply(null,arguments),links:b.apply(null,arguments)};return T(i),f(i),v(i),N(i),G(i),be(i),i}_.update=function(i){return be(i),i},_.nodeId=function(i){return arguments.length?(L=typeof i=="function"?i:F(i),_):L},_.nodeAlign=function(i){return arguments.length?(g=typeof i=="function"?i:F(i),_):g},_.nodeSort=function(i){return arguments.length?(s=i,_):s},_.nodeWidth=function(i){return arguments.length?(r=+i,_):r},_.nodePadding=function(i){return arguments.length?(d=u=+i,_):d},_.nodes=function(i){return arguments.length?(y=typeof i=="function"?i:F(i),_):y},_.links=function(i){return arguments.length?(b=typeof i=="function"?i:F(i),_):b},_.linkSort=function(i){return arguments.length?(k=i,_):k},_.size=function(i){return arguments.length?(n=e=0,t=+i[0],o=+i[1],_):[t-n,o-e]},_.extent=function(i){return arguments.length?(n=+i[0][0],t=+i[1][0],e=+i[0][1],o=+i[1][1],_):[[n,e],[t,o]]},_.iterations=function(i){return arguments.length?(S=+i,_):S};function T({nodes:i,links:c}){for(const[h,l]of i.entries())l.index=h,l.sourceLinks=[],l.targetLinks=[];const a=new Map(i.map((h,l)=>[L(h,l,i),h]));for(const[h,l]of c.entries()){l.index=h;let{source:w,target:M}=l;typeof w!="object"&&(w=l.source=Le(a,w)),typeof M!="object"&&(M=l.target=Le(a,M)),w.sourceLinks.push(l),M.targetLinks.push(l)}if(k!=null)for(const{sourceLinks:h,targetLinks:l}of i)h.sort(k),l.sort(k)}function f({nodes:i}){for(const c of i)c.value=c.fixedValue===void 0?Math.max(te(c.sourceLinks,ne),te(c.targetLinks,ne)):c.fixedValue}function v({nodes:i}){const c=i.length;let a=new Set(i),h=new Set,l=0;for(;a.size;){for(const w of a){w.depth=l;for(const{target:M}of w.sourceLinks)h.add(M)}if(++l>c)throw new Error("circular link");a=h,h=new Set}}function N({nodes:i}){const c=i.length;let a=new Set(i),h=new Set,l=0;for(;a.size;){for(const w of a){w.height=l;for(const{source:M}of w.targetLinks)h.add(M)}if(++l>c)throw new Error("circular link");a=h,h=new Set}}function x({nodes:i}){const c=ke(i,l=>l.depth)+1,a=(t-n-r)/(c-1),h=new Array(c);for(const l of i){const w=Math.max(0,Math.min(c-1,Math.floor(g.call(null,l,c))));l.layer=w,l.x0=n+w*a,l.x1=l.x0+r,h[w]?h[w].push(l):h[w]=[l]}if(s)for(const l of h)l.sort(s);return h}function E(i){const c=Ie(i,a=>(o-e-(a.length-1)*u)/te(a,ne));for(const a of i){let h=e;for(const l of a){l.y0=h,l.y1=h+l.value*c,h=l.y1+u;for(const w of l.sourceLinks)w.width=w.value*c}h=(o-h+u)/(a.length+1);for(let l=0;l<a.length;++l){const w=a[l];w.y0+=h*(l+1),w.y1+=h*(l+1)}De(a)}}function G(i){const c=x(i);u=Math.min(d,(o-e)/(ke(c,a=>a.length)-1)),E(c);for(let a=0;a<S;++a){const h=Math.pow(.99,a),l=Math.max(1-h,(a+1)/S);B(c,h,l),m(c,h,l)}}function m(i,c,a){for(let h=1,l=i.length;h<l;++h){const w=i[h];for(const M of w){let V=0,R=0;for(const{source:J,value:ee}of M.targetLinks){let K=ee*(M.layer-J.layer);V+=Re(J,M)*K,R+=K}if(!(R>0))continue;let O=(V/R-M.y0)*c;M.y0+=O,M.y1+=O,se(M)}s===void 0&&w.sort(Z),U(w,a)}}function B(i,c,a){for(let h=i.length,l=h-2;l>=0;--l){const w=i[l];for(const M of w){let V=0,R=0;for(const{target:J,value:ee}of M.sourceLinks){let K=ee*(J.layer-M.layer);V+=We(M,J)*K,R+=K}if(!(R>0))continue;let O=(V/R-M.y0)*c;M.y0+=O,M.y1+=O,se(M)}s===void 0&&w.sort(Z),U(w,a)}}function U(i,c){const a=i.length>>1,h=i[a];re(i,h.y0-u,a-1,c),C(i,h.y1+u,a+1,c),re(i,o,i.length-1,c),C(i,e,0,c)}function C(i,c,a,h){for(;a<i.length;++a){const l=i[a],w=(c-l.y0)*h;w>1e-6&&(l.y0+=w,l.y1+=w),c=l.y1+u}}function re(i,c,a,h){for(;a>=0;--a){const l=i[a],w=(l.y1-c)*h;w>1e-6&&(l.y0-=w,l.y1-=w),c=l.y0-u}}function se({sourceLinks:i,targetLinks:c}){if(k===void 0){for(const{source:{sourceLinks:a}}of c)a.sort(ve);for(const{target:{targetLinks:a}}of i)a.sort(we)}}function De(i){if(k===void 0)for(const{sourceLinks:c,targetLinks:a}of i)c.sort(ve),a.sort(we)}function Re(i,c){let a=i.y0-(i.sourceLinks.length-1)*u/2;for(const{target:h,width:l}of i.sourceLinks){if(h===c)break;a+=l+u}for(const{source:h,width:l}of c.targetLinks){if(h===i)break;a-=l}return a}function We(i,c){let a=c.y0-(c.targetLinks.length-1)*u/2;for(const{source:h,width:l}of c.targetLinks){if(h===i)break;a+=l+u}for(const{target:h,width:l}of i.sourceLinks){if(h===c)break;a-=l}return a}return _}function Se(n,e,t){const o=n.slice();return o[19]=e[t],o[21]=t,o}function Me(n,e,t){const o=n.slice();return o[22]=e[t],o[21]=t,o}function Ne(n,e){let t,o,r,d,u,L,g,s;function k(...b){return e[15](e[21],...b)}function y(...b){return e[16](e[21],...b)}return{key:n,first:null,c(){t=z("path"),this.h()},l(b){t=P(b,"path",{id:!0,d:!0,stroke:!0,"stroke-width":!0,opacity:!0,fill:!0}),I(t).forEach(A),this.h()},h(){p(t,"id",o=`link-${e[21]}`),p(t,"d",r=e[6](e[22])||void 0),p(t,"stroke",d=e[2].includes(e[21])?"red":"black"),p(t,"stroke-width",u=Math.max(1,e[22].width)),p(t,"opacity",L=e[2].includes(e[21])?.5:.1),p(t,"fill","none"),this.first=t},m(b,S){q(b,t,S),g||(s=[j(t,"mouseover",k),j(t,"mouseout",e[7]),j(t,"focus",y),j(t,"blur",e[7])],g=!0)},p(b,S){e=b,S&2&&o!==(o=`link-${e[21]}`)&&p(t,"id",o),S&2&&r!==(r=e[6](e[22])||void 0)&&p(t,"d",r),S&6&&d!==(d=e[2].includes(e[21])?"red":"black")&&p(t,"stroke",d),S&2&&u!==(u=Math.max(1,e[22].width))&&p(t,"stroke-width",u),S&6&&L!==(L=e[2].includes(e[21])?.5:.1)&&p(t,"opacity",L)},d(b){b&&A(t),g=!1,Ee(s)}}}function xe(n,e){let t,o,r,d,u,L,g,s,k=e[19].name+"",y,b,S,_,T,f;function v(...x){return e[17](e[21],e[19],...x)}function N(...x){return e[18](e[21],e[19],...x)}return{key:n,first:null,c(){t=z("g"),o=z("rect"),s=z("text"),y=Ve(k),this.h()},l(x){t=P(x,"g",{transform:!0});var E=I(t);o=P(E,"rect",{id:!0,width:!0,height:!0,fill:!0,opacity:!0,stroke:!0,"stroke-width":!0}),I(o).forEach(A),s=P(E,"text",{x:!0,y:!0,dy:!0,"text-anchor":!0,"font-weight":!0,class:!0});var G=I(s);y=Oe(G,k),G.forEach(A),E.forEach(A),this.h()},h(){p(o,"id",r=`rect-${e[21]}`),p(o,"width",d=e[19].x1-e[19].x0),p(o,"height",u=e[19].y1-e[19].y0),p(o,"fill",L=e[5](e[4].indexOf(e[19].name))),p(o,"opacity",g=e[3]==e[21]?.8:.5),p(o,"stroke","white"),p(o,"stroke-width",2),p(s,"x",25),p(s,"y",b=(e[19].y1-e[19].y0)/2),p(s,"dy",4),p(s,"text-anchor","start"),p(s,"font-weight",S=e[3]==e[21]?900:500),p(s,"class","svelte-1n1fdun"),p(t,"transform",_=`translate(${e[19].x0}, ${e[19].y0})`),this.first=t},m(x,E){q(x,t,E),H(t,o),H(t,s),H(s,y),T||(f=[j(o,"mouseover",v),j(o,"mouseout",e[7]),j(o,"focus",N),j(o,"blur",e[7])],T=!0)},p(x,E){e=x,E&1&&r!==(r=`rect-${e[21]}`)&&p(o,"id",r),E&1&&d!==(d=e[19].x1-e[19].x0)&&p(o,"width",d),E&1&&u!==(u=e[19].y1-e[19].y0)&&p(o,"height",u),E&1&&L!==(L=e[5](e[4].indexOf(e[19].name)))&&p(o,"fill",L),E&9&&g!==(g=e[3]==e[21]?.8:.5)&&p(o,"opacity",g),E&1&&k!==(k=e[19].name+"")&&Je(y,k),E&1&&b!==(b=(e[19].y1-e[19].y0)/2)&&p(s,"y",b),E&9&&S!==(S=e[3]==e[21]?900:500)&&p(s,"font-weight",S),E&1&&_!==(_=`translate(${e[19].x0}, ${e[19].y0})`)&&p(t,"transform",_)},d(x){x&&A(t),T=!1,Ee(f)}}}function Mt(n){let e,t,o,r,d,u=[],L=new Map,g,s=[],k=new Map,y,b=n[1];const S=f=>`link-${f[21]}`;for(let f=0;f<b.length;f+=1){let v=Me(n,b,f),N=S(v);L.set(N,u[f]=Ne(N,v))}let _=n[0];const T=f=>`node-${f[21]}`;for(let f=0;f<_.length;f+=1){let v=Se(n,_,f),N=T(v);k.set(N,s[f]=xe(N,v))}return{c(){e=z("defs"),t=z("linearGradient"),o=z("stop"),r=z("stop"),d=le();for(let f=0;f<u.length;f+=1)u[f].c();g=le();for(let f=0;f<s.length;f+=1)s[f].c();y=ue(),this.h()},l(f){e=P(f,"defs",{});var v=I(e);t=P(v,"linearGradient",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0});var N=I(t);o=P(N,"stop",{offset:!0,style:!0}),I(o).forEach(A),r=P(N,"stop",{offset:!0,style:!0}),I(r).forEach(A),N.forEach(A),v.forEach(A),d=ae(f);for(let x=0;x<u.length;x+=1)u[x].l(f);g=ae(f);for(let x=0;x<s.length;x+=1)s[x].l(f);y=ue(),this.h()},h(){p(o,"offset","0%"),X(o,"stop-color","rgb(255,255,0)"),X(o,"stop-opacity","1"),p(r,"offset","100%"),X(r,"stop-color","rgb(255,0,0)"),X(r,"stop-opacity","1"),p(t,"id","grad1"),p(t,"x1","0%"),p(t,"y1","0%"),p(t,"x2","100%"),p(t,"y2","0%")},m(f,v){q(f,e,v),H(e,t),H(t,o),H(t,r),q(f,d,v);for(let N=0;N<u.length;N+=1)u[N].m(f,v);q(f,g,v);for(let N=0;N<s.length;N+=1)s[N].m(f,v);q(f,y,v)},p(f,[v]){v&198&&(b=f[1],u=fe(u,v,S,1,f,b,L,g.parentNode,ce,Ne,g,Me)),v&189&&(_=f[0],s=fe(s,v,T,1,f,_,k,y.parentNode,ce,xe,y,Se))},i:he,o:he,d(f){f&&A(e),f&&A(d);for(let v=0;v<u.length;v+=1)u[v].d(f);f&&A(g);for(let v=0;v<s.length;v+=1)s[v].d(f);f&&A(y)}}}function Nt(n,e,t){let{graph:o}=e,{size:r=[400,400]}=e,{nodeAlign:d=void 0}=e,{nodeWidth:u=24}=e,{nodePadding:L=0}=e,{nodeSort:g=void 0}=e,{iterations:s=void 0}=e;const k=[...new Set(o.nodes.map(m=>m.name))],y=Pe(lt);y.domain([0,k.length]);let b,S;const _=mt().source(m=>[m.source.x1,m.y0]).target(m=>[m.target.x0,m.y1]);let T=[],f=-1;const v=()=>{t(2,T=[]),t(3,f=-1)},N=(m,B)=>{t(2,T=[m])},x=(m,B)=>{t(2,T=[m])},E=(m,B,U)=>{t(3,f=m),t(2,T=[...B.sourceLinks.map(C=>C.index),...B.targetLinks.map(C=>C.index)])},G=(m,B,U)=>{t(3,f=m),t(2,T=[...B.sourceLinks.map(C=>C.index),...B.targetLinks.map(C=>C.index)])};return n.$$set=m=>{"graph"in m&&t(8,o=m.graph),"size"in m&&t(9,r=m.size),"nodeAlign"in m&&t(10,d=m.nodeAlign),"nodeWidth"in m&&t(11,u=m.nodeWidth),"nodePadding"in m&&t(12,L=m.nodePadding),"nodeSort"in m&&t(13,g=m.nodeSort),"iterations"in m&&t(14,s=m.iterations)},n.$$.update=()=>{if(n.$$.dirty&32512){const m=St();r&&m.size(r),d&&(d==="left"?m.nodeAlign(_t):d==="right"?m.nodeAlign(kt):d==="center"?m.nodeAlign(wt):d==="justify"?m.nodeAlign(je):m.nodeAlign(d)),u&&m.nodeWidth(u),L&&m.nodePadding(L),g&&m.nodeSort(g),s&&m.iterations(s);const B=m(o);t(0,b=B.nodes),t(1,S=B.links)}},[b,S,T,f,k,y,_,v,o,r,d,u,L,g,s,N,x,E,G]}class Tt extends Ge{constructor(e){super(),qe(this,e,Nt,Mt,He,{graph:8,size:9,nodeAlign:10,nodeWidth:11,nodePadding:12,nodeSort:13,iterations:14})}}export{Tt as S};
