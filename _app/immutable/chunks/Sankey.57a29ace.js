import{S as Re,i as De,s as qe,W as I,a as le,e as ue,X as P,m as T,h as C,c as fe,n as y,p as Q,b as q,G as H,a0 as ae,H as ce,M as W,P as Ee,q as He,r as Ve,u as Oe,a1 as he}from"./index.e4d1e6a5.js";import{R as Ae,r as Xe,d as Fe,e as Je,C as Ke,b as de,a as ge,f as Y,h as Qe,l as Ue,g as Be,j as Ye,k as Ze,m as $e}from"./linear.3a4e853b.js";import{l as et}from"./link.e4a630db.js";const tt=Math.PI/180,nt=180/Math.PI;var Ce=-.14861,oe=1.78277,re=-.29227,$=-.90649,J=1.97294,me=J*$,ye=J*oe,ke=oe*re-$*Ce;function ot(n){if(n instanceof R)return new R(n.h,n.s,n.l,n.opacity);n instanceof Ae||(n=Xe(n));var e=n.r/255,t=n.g/255,o=n.b/255,i=(ke*o+me*e-ye*t)/(ke+me-ye),g=o-i,c=(J*(t-i)-re*g)/$,L=Math.sqrt(c*c+g*g)/(J*i*(1-i)),p=L?Math.atan2(c,g)*nt-120:NaN;return new R(p<0?p+360:p,L,i,n.opacity)}function j(n,e,t,o){return arguments.length===1?ot(n):new R(n,e,t,o??1)}function R(n,e,t,o){this.h=+n,this.s=+e,this.l=+t,this.opacity=+o}Fe(R,j,Je(Ke,{brighter(n){return n=n==null?de:Math.pow(de,n),new R(this.h,this.s,this.l*n,this.opacity)},darker(n){return n=n==null?ge:Math.pow(ge,n),new R(this.h,this.s,this.l*n,this.opacity)},rgb(){var n=isNaN(this.h)?0:(this.h+120)*tt,e=+this.l,t=isNaN(this.s)?0:this.s*e*(1-e),o=Math.cos(n),i=Math.sin(n);return new Ae(255*(e+t*(Ce*o+oe*i)),255*(e+t*(re*o+$*i)),255*(e+t*(J*o)),this.opacity)}}));function ze(n){return function e(t){t=+t;function o(i,g){var c=n((i=j(i)).h,(g=j(g)).h),L=Y(i.s,g.s),p=Y(i.l,g.l),f=Y(i.opacity,g.opacity);return function(b){return i.h=c(b),i.s=L(b),i.l=p(Math.pow(b,t)),i.opacity=f(b),i+""}}return o.gamma=e,o}(1)}ze(Qe);var xe=ze(Y);function rt(){var n=0,e=1,t,o,i,g,c=Be,L=!1,p;function f(m){return m==null||isNaN(m=+m)?p:c(i===0?.5:(m=(g(m)-t)*i,L?Math.max(0,Math.min(1,m)):m))}f.domain=function(m){return arguments.length?([n,e]=m,t=g(n=+n),o=g(e=+e),i=t===o?0:1/(o-t),f):[n,e]},f.clamp=function(m){return arguments.length?(L=!!m,f):L},f.interpolator=function(m){return arguments.length?(c=m,f):c};function b(m){return function(v){var M,k;return arguments.length?([M,k]=v,c=m(M,k),f):[c(0),c(1)]}}return f.range=b(Ze),f.rangeRound=b($e),f.unknown=function(m){return arguments.length?(p=m,f):p},function(m){return g=m,t=m(n),o=m(e),i=t===o?0:1/(o-t),f}}function it(n,e){return e.domain(n.domain()).interpolator(n.interpolator()).clamp(n.clamp()).unknown(n.unknown())}function Ie(){var n=Ue(rt()(Be));return n.copy=function(){return it(n,Ie())},Ye.apply(n,arguments)}xe(j(-100,.75,.35),j(80,1.5,.8));var st=xe(j(260,.75,.35),j(80,1.5,.8));j();function _e(n,e){let t;if(e===void 0)for(const o of n)o!=null&&(t<o||t===void 0&&o>=o)&&(t=o);else{let o=-1;for(let i of n)(i=e(i,++o,n))!=null&&(t<i||t===void 0&&i>=i)&&(t=i)}return t}function Pe(n,e){let t;if(e===void 0)for(const o of n)o!=null&&(t>o||t===void 0&&o>=o)&&(t=o);else{let o=-1;for(let i of n)(i=e(i,++o,n))!=null&&(t>i||t===void 0&&i>=i)&&(t=i)}return t}function te(n,e){let t=0;if(e===void 0)for(let o of n)(o=+o)&&(t+=o);else{let o=-1;for(let i of n)(i=+e(i,++o,n))&&(t+=i)}return t}function lt(n){return n.target.depth}function ut(n){return n.depth}function ft(n,e){return e-1-n.height}function Te(n,e){return n.sourceLinks.length?n.depth:e-1}function at(n){return n.targetLinks.length?n.depth:n.sourceLinks.length?Pe(n.sourceLinks,lt)-1:0}function U(n){return function(){return n}}function pe(n,e){return Z(n.source,e.source)||n.index-e.index}function we(n,e){return Z(n.target,e.target)||n.index-e.index}function Z(n,e){return n.y0-e.y0}function ne(n){return n.value}function ct(n){return n.index}function ht(n){return n.nodes}function dt(n){return n.links}function Le(n,e){const t=n.get(e);if(!t)throw new Error("missing: "+e);return t}function ve({nodes:n}){for(const e of n){let t=e.y0,o=t;for(const i of e.sourceLinks)i.y0=t+i.width/2,t+=i.width;for(const i of e.targetLinks)i.y1=o+i.width/2,o+=i.width}}function gt(){let n=0,e=0,t=1,o=1,i=24,g=8,c,L=ct,p=Te,f,b,m=ht,v=dt,M=6;function k(){const r={nodes:m.apply(null,arguments),links:v.apply(null,arguments)};return B(r),u(r),w(r),N(r),D(r),ve(r),r}k.update=function(r){return ve(r),r},k.nodeId=function(r){return arguments.length?(L=typeof r=="function"?r:U(r),k):L},k.nodeAlign=function(r){return arguments.length?(p=typeof r=="function"?r:U(r),k):p},k.nodeSort=function(r){return arguments.length?(f=r,k):f},k.nodeWidth=function(r){return arguments.length?(i=+r,k):i},k.nodePadding=function(r){return arguments.length?(g=c=+r,k):g},k.nodes=function(r){return arguments.length?(m=typeof r=="function"?r:U(r),k):m},k.links=function(r){return arguments.length?(v=typeof r=="function"?r:U(r),k):v},k.linkSort=function(r){return arguments.length?(b=r,k):b},k.size=function(r){return arguments.length?(n=e=0,t=+r[0],o=+r[1],k):[t-n,o-e]},k.extent=function(r){return arguments.length?(n=+r[0][0],t=+r[1][0],e=+r[0][1],o=+r[1][1],k):[[n,e],[t,o]]},k.iterations=function(r){return arguments.length?(M=+r,k):M};function B({nodes:r,links:h}){for(const[a,s]of r.entries())s.index=a,s.sourceLinks=[],s.targetLinks=[];const l=new Map(r.map((a,s)=>[L(a,s,r),a]));for(const[a,s]of h.entries()){s.index=a;let{source:_,target:S}=s;typeof _!="object"&&(_=s.source=Le(l,_)),typeof S!="object"&&(S=s.target=Le(l,S)),_.sourceLinks.push(s),S.targetLinks.push(s)}if(b!=null)for(const{sourceLinks:a,targetLinks:s}of r)a.sort(b),s.sort(b)}function u({nodes:r}){for(const h of r)h.value=h.fixedValue===void 0?Math.max(te(h.sourceLinks,ne),te(h.targetLinks,ne)):h.fixedValue}function w({nodes:r}){const h=r.length;let l=new Set(r),a=new Set,s=0;for(;l.size;){for(const _ of l){_.depth=s;for(const{target:S}of _.sourceLinks)a.add(S)}if(++s>h)throw new Error("circular link");l=a,a=new Set}}function N({nodes:r}){const h=r.length;let l=new Set(r),a=new Set,s=0;for(;l.size;){for(const _ of l){_.height=s;for(const{source:S}of _.targetLinks)a.add(S)}if(++s>h)throw new Error("circular link");l=a,a=new Set}}function E({nodes:r}){const h=_e(r,s=>s.depth)+1,l=(t-n-i)/(h-1),a=new Array(h);for(const s of r){const _=Math.max(0,Math.min(h-1,Math.floor(p.call(null,s,h))));s.layer=_,s.x0=n+_*l,s.x1=s.x0+i,a[_]?a[_].push(s):a[_]=[s]}if(f)for(const s of a)s.sort(f);return a}function A(r){const h=Pe(r,l=>(o-e-(l.length-1)*c)/te(l,ne));for(const l of r){let a=e;for(const s of l){s.y0=a,s.y1=a+s.value*h,a=s.y1+c;for(const _ of s.sourceLinks)_.width=_.value*h}a=(o-a+c)/(l.length+1);for(let s=0;s<l.length;++s){const _=l[s];_.y0+=a*(s+1),_.y1+=a*(s+1)}We(l)}}function D(r){const h=E(r);c=Math.min(g,(o-e)/(_e(h,l=>l.length)-1)),A(h);for(let l=0;l<M;++l){const a=Math.pow(.99,l),s=Math.max(1-a,(l+1)/M);z(h,a,s),d(h,a,s)}}function d(r,h,l){for(let a=1,s=r.length;a<s;++a){const _=r[a];for(const S of _){let V=0,G=0;for(const{source:X,value:ee}of S.targetLinks){let F=ee*(S.layer-X.layer);V+=je(X,S)*F,G+=F}if(!(G>0))continue;let O=(V/G-S.y0)*h;S.y0+=O,S.y1+=O,se(S)}f===void 0&&_.sort(Z),K(_,l)}}function z(r,h,l){for(let a=r.length,s=a-2;s>=0;--s){const _=r[s];for(const S of _){let V=0,G=0;for(const{target:X,value:ee}of S.sourceLinks){let F=ee*(X.layer-S.layer);V+=Ge(S,X)*F,G+=F}if(!(G>0))continue;let O=(V/G-S.y0)*h;S.y0+=O,S.y1+=O,se(S)}f===void 0&&_.sort(Z),K(_,l)}}function K(r,h){const l=r.length>>1,a=r[l];ie(r,a.y0-c,l-1,h),x(r,a.y1+c,l+1,h),ie(r,o,r.length-1,h),x(r,e,0,h)}function x(r,h,l,a){for(;l<r.length;++l){const s=r[l],_=(h-s.y0)*a;_>1e-6&&(s.y0+=_,s.y1+=_),h=s.y1+c}}function ie(r,h,l,a){for(;l>=0;--l){const s=r[l],_=(s.y1-h)*a;_>1e-6&&(s.y0-=_,s.y1-=_),h=s.y0-c}}function se({sourceLinks:r,targetLinks:h}){if(b===void 0){for(const{source:{sourceLinks:l}}of h)l.sort(we);for(const{target:{targetLinks:l}}of r)l.sort(pe)}}function We(r){if(b===void 0)for(const{sourceLinks:h,targetLinks:l}of r)h.sort(we),l.sort(pe)}function je(r,h){let l=r.y0-(r.sourceLinks.length-1)*c/2;for(const{target:a,width:s}of r.sourceLinks){if(a===h)break;l+=s+c}for(const{source:a,width:s}of h.targetLinks){if(a===r)break;l-=s}return l}function Ge(r,h){let l=h.y0-(h.targetLinks.length-1)*c/2;for(const{source:a,width:s}of h.targetLinks){if(a===r)break;l+=s+c}for(const{target:a,width:s}of r.sourceLinks){if(a===h)break;l-=s}return l}return k}function be(n,e,t){const o=n.slice();return o[19]=e[t],o[21]=t,o}function Me(n,e,t){const o=n.slice();return o[22]=e[t],o[21]=t,o}function Se(n,e){let t,o,i,g,c,L,p,f;function b(...v){return e[15](e[21],...v)}function m(...v){return e[16](e[21],...v)}return{key:n,first:null,c(){t=I("path"),this.h()},l(v){t=P(v,"path",{id:!0,d:!0,stroke:!0,"stroke-width":!0,opacity:!0,fill:!0}),T(t).forEach(C),this.h()},h(){y(t,"id",o=`link-${e[21]}`),y(t,"d",i=e[6](e[22])||void 0),y(t,"stroke",g=e[2].includes(e[21])?"red":"black"),y(t,"stroke-width",c=Math.max(1,e[22].width)),y(t,"opacity",L=e[2].includes(e[21])?.5:.1),y(t,"fill","none"),this.first=t},m(v,M){q(v,t,M),p||(f=[W(t,"mouseover",b),W(t,"mouseout",e[7]),W(t,"focus",m),W(t,"blur",e[7])],p=!0)},p(v,M){e=v,M&2&&o!==(o=`link-${e[21]}`)&&y(t,"id",o),M&2&&i!==(i=e[6](e[22])||void 0)&&y(t,"d",i),M&6&&g!==(g=e[2].includes(e[21])?"red":"black")&&y(t,"stroke",g),M&2&&c!==(c=Math.max(1,e[22].width))&&y(t,"stroke-width",c),M&6&&L!==(L=e[2].includes(e[21])?.5:.1)&&y(t,"opacity",L)},d(v){v&&C(t),p=!1,Ee(f)}}}function Ne(n,e){let t,o,i,g,c,L,p,f,b=e[19].name+"",m,v,M,k,B,u;function w(...E){return e[17](e[21],e[19],...E)}function N(...E){return e[18](e[21],e[19],...E)}return{key:n,first:null,c(){t=I("g"),o=I("rect"),f=I("text"),m=He(b),this.h()},l(E){t=P(E,"g",{transform:!0});var A=T(t);o=P(A,"rect",{id:!0,width:!0,height:!0,fill:!0,opacity:!0,stroke:!0,"stroke-width":!0}),T(o).forEach(C),f=P(A,"text",{x:!0,y:!0,dy:!0,"text-anchor":!0,"font-weight":!0,class:!0});var D=T(f);m=Ve(D,b),D.forEach(C),A.forEach(C),this.h()},h(){y(o,"id",i=`rect-${e[21]}`),y(o,"width",g=e[19].x1-e[19].x0),y(o,"height",c=e[19].y1-e[19].y0),y(o,"fill",L=e[5](e[4].indexOf(e[19].name))),y(o,"opacity",p=e[3]==e[21]?.8:.5),y(o,"stroke","white"),y(o,"stroke-width",2),y(f,"x",25),y(f,"y",v=(e[19].y1-e[19].y0)/2),y(f,"dy",4),y(f,"text-anchor","start"),y(f,"font-weight",M=e[3]==e[21]?900:500),y(f,"class","svelte-1n1fdun"),y(t,"transform",k=`translate(${e[19].x0}, ${e[19].y0})`),this.first=t},m(E,A){q(E,t,A),H(t,o),H(t,f),H(f,m),B||(u=[W(o,"mouseover",w),W(o,"mouseout",e[7]),W(o,"focus",N),W(o,"blur",e[7])],B=!0)},p(E,A){e=E,A&1&&i!==(i=`rect-${e[21]}`)&&y(o,"id",i),A&1&&g!==(g=e[19].x1-e[19].x0)&&y(o,"width",g),A&1&&c!==(c=e[19].y1-e[19].y0)&&y(o,"height",c),A&1&&L!==(L=e[5](e[4].indexOf(e[19].name)))&&y(o,"fill",L),A&9&&p!==(p=e[3]==e[21]?.8:.5)&&y(o,"opacity",p),A&1&&b!==(b=e[19].name+"")&&Oe(m,b),A&1&&v!==(v=(e[19].y1-e[19].y0)/2)&&y(f,"y",v),A&9&&M!==(M=e[3]==e[21]?900:500)&&y(f,"font-weight",M),A&1&&k!==(k=`translate(${e[19].x0}, ${e[19].y0})`)&&y(t,"transform",k)},d(E){E&&C(t),B=!1,Ee(u)}}}function mt(n){let e,t,o,i,g,c=[],L=new Map,p,f=[],b=new Map,m,v=n[1];const M=u=>`link-${u[21]}`;for(let u=0;u<v.length;u+=1){let w=Me(n,v,u),N=M(w);L.set(N,c[u]=Se(N,w))}let k=n[0];const B=u=>`node-${u[21]}`;for(let u=0;u<k.length;u+=1){let w=be(n,k,u),N=B(w);b.set(N,f[u]=Ne(N,w))}return{c(){e=I("defs"),t=I("linearGradient"),o=I("stop"),i=I("stop"),g=le();for(let u=0;u<c.length;u+=1)c[u].c();p=le();for(let u=0;u<f.length;u+=1)f[u].c();m=ue(),this.h()},l(u){e=P(u,"defs",{});var w=T(e);t=P(w,"linearGradient",{id:!0,x1:!0,y1:!0,x2:!0,y2:!0});var N=T(t);o=P(N,"stop",{offset:!0,style:!0}),T(o).forEach(C),i=P(N,"stop",{offset:!0,style:!0}),T(i).forEach(C),N.forEach(C),w.forEach(C),g=fe(u);for(let E=0;E<c.length;E+=1)c[E].l(u);p=fe(u);for(let E=0;E<f.length;E+=1)f[E].l(u);m=ue(),this.h()},h(){y(o,"offset","0%"),Q(o,"stop-color","rgb(255,255,0)"),Q(o,"stop-opacity","1"),y(i,"offset","100%"),Q(i,"stop-color","rgb(255,0,0)"),Q(i,"stop-opacity","1"),y(t,"id","grad1"),y(t,"x1","0%"),y(t,"y1","0%"),y(t,"x2","100%"),y(t,"y2","0%")},m(u,w){q(u,e,w),H(e,t),H(t,o),H(t,i),q(u,g,w);for(let N=0;N<c.length;N+=1)c[N].m(u,w);q(u,p,w);for(let N=0;N<f.length;N+=1)f[N].m(u,w);q(u,m,w)},p(u,[w]){w&198&&(v=u[1],c=ae(c,w,M,1,u,v,L,p.parentNode,he,Se,p,Me)),w&189&&(k=u[0],f=ae(f,w,B,1,u,k,b,m.parentNode,he,Ne,m,be))},i:ce,o:ce,d(u){u&&C(e),u&&C(g);for(let w=0;w<c.length;w+=1)c[w].d(u);u&&C(p);for(let w=0;w<f.length;w+=1)f[w].d(u);u&&C(m)}}}function yt(n,e,t){let{graph:o}=e,{size:i=[400,400]}=e,{nodeAlign:g=void 0}=e,{nodeWidth:c=24}=e,{nodePadding:L=0}=e,{nodeSort:p=void 0}=e,{iterations:f=void 0}=e;const b=[...new Set(o.nodes.map(d=>d.name))],m=Ie(st);m.domain([0,b.length]);let v,M;const k=et().source(d=>[d.source.x1,d.y0]).target(d=>[d.target.x0,d.y1]);let B=[],u=-1;const w=()=>{t(2,B=[]),t(3,u=-1)},N=(d,z)=>{t(2,B=[d])},E=(d,z)=>{t(2,B=[d])},A=(d,z,K)=>{t(3,u=d),t(2,B=[...z.sourceLinks.map(x=>x.index),...z.targetLinks.map(x=>x.index)])},D=(d,z,K)=>{t(3,u=d),t(2,B=[...z.sourceLinks.map(x=>x.index),...z.targetLinks.map(x=>x.index)])};return n.$$set=d=>{"graph"in d&&t(8,o=d.graph),"size"in d&&t(9,i=d.size),"nodeAlign"in d&&t(10,g=d.nodeAlign),"nodeWidth"in d&&t(11,c=d.nodeWidth),"nodePadding"in d&&t(12,L=d.nodePadding),"nodeSort"in d&&t(13,p=d.nodeSort),"iterations"in d&&t(14,f=d.iterations)},n.$$.update=()=>{if(n.$$.dirty&32512){const d=gt();i&&d.size(i),g&&(g==="left"?d.nodeAlign(ut):g==="right"?d.nodeAlign(ft):g==="center"?d.nodeAlign(at):g==="justify"?d.nodeAlign(Te):d.nodeAlign(g)),c&&d.nodeWidth(c),L&&d.nodePadding(L),p&&d.nodeSort(p),f&&d.iterations(f);const z=d(o);t(0,v=z.nodes),t(1,M=z.links)}},[v,M,B,u,b,m,k,w,o,i,g,c,L,p,f,N,E,A,D]}class wt extends Re{constructor(e){super(),De(this,e,yt,mt,qe,{graph:8,size:9,nodeAlign:10,nodeWidth:11,nodePadding:12,nodeSort:13,iterations:14})}}export{wt as S};
